<!DOCTYPE html>
<html lang="en">

<head>
  <script>if(/eruda=true/.test(window.location)||"true"==localStorage.getItem("active-eruda"))document.write('<script src="//cdn.jsdelivr.net/npm/eruda">\x3c/script>'),document.write("<script>eruda.init();\x3c/script>");</script>

  <title>Index | JS-DOS Games</title>
  <meta name="description" content="Free, unblocked DOS games for the browser. Made by sean-7777.">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <meta property="og:url" content="https://js-dos-games.pages.dev/">
  <meta property="og:type" content="website">
  <meta property="og:title" content="JS-DOS Games">
  <meta property="og:description" content="Free, unblocked DOS games for the browser. Made by sean-7777.">
  <meta property="og:image" content="/assets/og.png">

  <meta name="twitter:card" content="summary_large_image">
  <meta property="twitter:domain" content="js-dos-games.pages.dev">
  <meta property="twitter:url" content="https://js-dos-games.pages.dev/">
  <meta name="twitter:title" content="JS-DOS Games">
  <meta name="twitter:description" content="Free, unblocked DOS games for the browser. Made by sean-7777.">
  <meta name="twitter:image" content="/assets/og.png" />

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@2/css/pico.cyan.min.css" />
  <!-- <script src="https://cdn.jsdelivr.net/npm/@leeoniya/ufuzzy@1.0.14/dist/uFuzzy.iife.min.js"></script> -->
  <script type="module">
    import shared from "./assets/shared.js";
    await shared();

    const games = await(await fetch("./assets/index.json")).json();
    const gamesLists = Array.from(document.querySelectorAll(".games-list"));

    gamesLists.forEach(gamesList => gamesList.textContent = "");
    displayGames(games);

    // wip: fuzzy search
    // const fuzzySearch = uFuzzy();
    // const names = games.map(game => game.name);
    // document.querySelector("#search").addEventListener("input", event => {
    //   const [ids, _, order] = fuzzySearch.search(names, event.target.value);
    //   const results = ids.reduce((store, id, i) => {
    //     store[order[i]] = id;
    //     return store;
    //   }, []);

    //   const games
    // });

    function displayGames(games) {
      games.forEach((game, i) => {
        const item = document.createElement("li");

        const link = document.createElement("a");
        link.href = `./player#${game.id}`;
        link.innerHTML = game.name; // textContent doesn't process entities

        item.appendChild(link);
        gamesLists[i % 2 ? 0 : 1].appendChild(item);
      });
    }
  </script>
</head>

<body>
  <main class="container">
    <hgroup>
      <h1>Free, unblocked DOS games for the browser</h1>
      <p>Made by <a href="https://github.com/sean-7777">sean-7777</a></p>
      <p>Disclaimer: Some games may not be available due to bundle size.</p>
    </hgroup>
    <!-- <form>
      <input name="search" type="search" placeholder="Search" id="search" />
    </form> -->
    <div class="grid">
      <ul class="games-list"><span aria-busy="true">Please wait, gameslist loading...</span></ul>
      <ul class="games-list">Thank you for using this site!</ul>
    </div>
  </main>
</body>

</html>